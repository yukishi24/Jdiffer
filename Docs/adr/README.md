# ADR（Architecture Decision Record）運用ルール

このディレクトリは  
**設計上の重要な判断と、その理由を記録する場所**である。

コードや Issue から消えがちな  
「なぜこの判断をしたか」を残すことが目的。

---

## ADR とは何か（簡単に）

ADR は以下を記録する。

- どんな前提・制約があったか
- 何を選択したか
- その結果、何が起きるか

**実装内容そのものは書かない。**

---

## いつ ADR を書くのか

次のいずれかに当てはまったら ADR を書く。

- 技術選定で A / B を比較した
- 将来変更する可能性が高い判断をした
- 「あとで見た自分が疑問に思いそう」
- Issue や PR の説明が長くなりそう

### 書かなくていいケース

- 明らかに自明な判断
- その Sprint 内で完結する作業判断
- 細かい実装方針

迷ったら書かない。  
**ADR は少数精鋭で運用する。**

---

## ADR の役割（他ドキュメントとの違い）

| ドキュメント   | 役割                   |
| -------------- | ---------------------- |
| Product Vision | なぜ作るか             |
| Roadmap        | どこへ向かうか         |
| User Story     | 何を提供するか         |
| Sprint / Issue | いつ・どう作るか       |
| **ADR**        | **なぜそう設計したか** |

ADR は  
Sprint でも User Story でも代替できない。

---

## ディレクトリ構成

```
docs/
└─ adr/
├─ README.md ← このファイル
├─ ADR-001-xxx.md
├─ ADR-002-yyy.md
└─ ADR-003-zzz.md
```

---

## ファイル命名規則

ADR-XXX-<short-title>.md

- XXX：連番（001から）
- short-title：内容が分かる英小文字＋ハイフン

例：

- ADR-001-database-selection.md
- ADR-002-auth-strategy.md

番号に意味は持たせない。

---

## ADR のライフサイクル

### Status の意味

- **Proposed**  
  まだ決定していない。検討中。
- **Accepted**  
  採用された判断。
- **Deprecated**  
  過去の判断。現在は使われていない。

### 運用ルール

- 原則 `Accepted` のみ増えていく
- 判断が覆ったら新しい ADR を作る
- 古い ADR は `Deprecated` にする

※ 上書きしない  
※ 履歴を残す

---

## Issue / PR との関係

- 設計判断を含む Issue / PR では
  - 対応する ADR をリンクする
- ADR 自体は Close しない
- ADR は成果物ではなく **判断の記録**

---

## 書くタイミング

- Sprint Planning 中：❌
- 実装中に迷った瞬間：△
- **判断を確定した直後：◎**
- PR を出す前：◎

理想は **判断 → ADR → 実装**。

---

## ADR を使う目的（重要）

- 過去の自分と議論しないため
- 「なぜこうなっているか」を即思い出すため
- 将来変更するときの判断材料にするため

**正解を書こうとしない。  
当時の判断を書け。**

---

## この README の位置づけ

- ADR を書く前に必ず読む
- ADR が増えすぎたら運用を見直す
- この README 自体は更新してよい

---

## 最後に

ADR は設計書ではない。  
議事録でもない。

**「判断の痕跡」だけを残せ。**
